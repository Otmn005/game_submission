<!doctype html>
<html lang="en">
<head>
  <!--
    RMIT GenAI & Cybersecurity Hackathon 2025 ‚Äî Challenge 3
    Campus: RMIT City ‚Ä¢ Team: The Trinity
    Game: Resilience Run ‚Äî Uni Life (Australia)
    Features: Calm palette, animated dice roll, confetti on win, AU mental health resources, expanded events.
    Tech: Pure HTML/CSS/JS (front-end only). No external libraries. Works offline.
  -->
  <meta charset="utf-8" />
  <title>Resilience Run ‚Äî Uni Life (Australia)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* ===== Calm palette (mint/sky) and accessible contrast ===== */
    :root{
      --bg1:#e8f6f2; --bg2:#e6f2fb; --panel:#ffffff; --ink:#0b2b2e; --muted:#45656a;
      --accent:#29b6f6; --accent2:#6ee7b7; --good:#16a34a; --bad:#ef4444; --warn:#f59e0b;
      --tile:#f2fbff; --tile-alt:#eefcf7; --stroke:#d9e5ec; --shadow:0 8px 28px rgba(9,30,66,.15);
    }
    *{box-sizing:border-box}
    body{
      margin:0; color:var(--ink); font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;
      background:linear-gradient(180deg,var(--bg1),var(--bg2) 60%, #f6fbff);
    }
    .wrap{max-width:1080px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;gap:12px}
    h1{font-size:28px;margin:0}
    .pill{font-size:12px;padding:4px 10px;border-radius:999px;border:1px solid var(--stroke);background:rgba(255,255,255,.8)}
    .card{background:var(--panel);border:1px solid var(--stroke);border-radius:16px;box-shadow:var(--shadow)}
    .panel{padding:18px}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .btn{border:1px solid var(--stroke);background:#f7fbff;color:var(--ink);padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn:hover{border-color:var(--accent)}
    .btn.primary{background:linear-gradient(135deg,#8ee3ff,#b9fbd6);color:#062e34;border:none}
    .btn.ghost{background:transparent}
    .grid{display:grid;grid-template-columns:repeat(10,1fr);gap:6px}
    .tile{
      aspect-ratio:1;background:var(--tile);border:1px solid var(--stroke);border-radius:10px;
      display:flex;align-items:center;justify-content:center;font-size:12px;color:#3b5f64;position:relative
    }
    .tile:nth-child(odd){background:var(--tile-alt)}
    .tile.start::after,.tile.finish::after{content:attr(data-tag);position:absolute;top:6px;left:6px;font-size:10px;color:#6a8c91}
    .player{
      width:68%;height:68%;border-radius:50%;
      background:conic-gradient(from 180deg,#9be7ff,#c8f7e3 60%,#d8d8ff);
      box-shadow:0 0 0 2px #fff, 0 6px 18px rgba(41,182,246,.3)
    }
    .hud{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .stat{background:#f6fbff;border:1px solid var(--stroke);padding:10px 12px;border-radius:12px;display:flex;gap:10px;align-items:center}
    .bar{width:160px;height:10px;background:#eef6fb;border-radius:999px;overflow:hidden;border:1px solid var(--stroke)}
    .bar>span{display:block;height:100%;background:linear-gradient(90deg,#8ee3ff,#b9fbd6);transition:width .25s ease}
    .log{height:200px;overflow:auto;background:#f7fbff;border:1px solid var(--stroke);border-radius:12px;padding:10px;font-size:14px;color:#335b60}
    .log p{margin:6px 0}
    .menu{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    .menu h2{margin:0 0 6px}
    .muted{color:var(--muted)}
    footer{margin-top:12px;color:#5a7f85;font-size:12px;text-align:center}

    /* Dice display */
    .dice{
      width:44px;height:44px;border-radius:10px;background:#fff;border:1px solid var(--stroke);
      display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:var(--shadow)
    }
    .rolling{animation: wiggle 0.6s ease-in-out infinite alternate}
    @keyframes wiggle{ from{transform:rotate(-6deg)} to{transform:rotate(6deg)} }

    /* Confetti canvas sits fixed on top */
    #confettiCanvas{
      position:fixed;left:0;top:0;width:100vw;height:100vh;pointer-events:none;display:none;z-index:999
    }

    /* Responsive tweaks */
    @media (max-width:900px){ .menu{grid-template-columns:1fr} }
    @media (max-width:600px){
      .grid{grid-template-columns:repeat(6,1fr)}
      h1{font-size:22px}
    }
  </style>
</head>
<body>
  <canvas id="confettiCanvas"></canvas>

  <div class="wrap">
    <header>
      <h1>Resilience Run ‚Äî Uni Life (Australia)</h1>
      <div><span class="pill">2D Dice Board</span> <span class="pill">Mental Health & Wellbeing</span> <span class="pill">Front-end only</span></div>
    </header>

    <!-- ====== MENU VIEW ====== -->
    <div id="view-menu" class="card panel">
      <div class="menu">
        <div>
          <h2>Welcome</h2>
          <p class="muted">Navigate a short semester by rolling a dice, making wellbeing choices, and reaching finals with enough energy left. Events mirror Australian uni life: counselling, GP mental health plans, Myki and commutes, heatwaves, part-time shifts, and exam crunches.</p>
          <ul>
            <li>Roll the dice to move across 30 tiles.</li>
            <li>Landing on tiles reveals <b>event cards</b> with two choices.</li>
            <li>Choices affect <b>Wellbeing</b> and <b>Knowledge</b>.</li>
            <li>Reach the finish with <b>Wellbeing ‚â• 60</b> to ‚Äúpass with balance‚Äù.</li>
          </ul>
          <div class="hud" style="margin-top:12px">
            <button class="btn primary" id="btn-start">Start Game</button>
            <button class="btn ghost" id="btn-how">How to Play</button>
          </div>
        </div>
        <div class="card panel">
          <h3 style="margin-top:0">Why it matters</h3>
          <p class="muted">Many Australian uni students experience high distress. Small, timely choices (breaks, asking for help, hydration in heatwaves, budgeting, social support) improve outcomes.</p>
          <ul class="muted">
            <li><b>Counselling & Accessibility</b> ‚Äî free/low-cost on campus</li>
            <li><b>GP Mental Health Plans</b> ‚Äî Medicare rebates for therapy</li>
            <li><b>Heatwaves</b> ‚Äî hydration & early study reduce strain</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- ====== PLAY VIEW ====== -->
    <div id="view-play" class="card panel" style="display:none">
      <div class="row">
        <div class="card panel" style="flex:1 1 460px">
          <div class="hud" style="margin-bottom:12px">
            <div class="stat">Wellbeing
              <div class="bar"><span id="wb-bar" style="width:70%"></span></div>
              <span id="wb-num">70</span>
            </div>
            <div class="stat">Knowledge
              <div class="bar"><span id="kn-bar" style="width:20%"></span></div>
              <span id="kn-num">20</span>
            </div>
            <div class="stat">Tile <span id="tile-num">1</span>/30</div>
            <div class="dice" id="dice-display" aria-label="Dice">1</div>
            <button class="btn" id="btn-roll">üé≤ Roll</button>
            <button class="btn ghost" id="btn-end">End Early</button>
          </div>
          <div class="grid" id="board"></div>
        </div>

        <div class="card panel" style="flex:1 1 300px;min-width:280px">
          <h3 style="margin-top:0">Event</h3>
          <div id="event-area" class="card panel" style="min-height:170px;background:#f7fbff"></div>
          <div style="height:10px"></div>
          <h3 style="margin:0 0 6px">Log</h3>
          <div id="log" class="log" aria-live="polite"></div>
        </div>
      </div>
    </div>

    <!-- ====== RESULTS VIEW ====== -->
    <div id="view-results" class="card panel" style="display:none">
      <h2 style="margin-top:0" id="result-title">Semester Summary</h2>
      <p id="result-body" class="muted"></p>

      <div class="card panel" style="background:#f7fbff">
        <h3 style="margin:0 0 6px">Helpful resources (Australia)</h3>
        <ul style="margin:0 0 6px 18px">
          <li><a href="https://www.lifeline.org.au/" target="_blank" rel="noopener">Lifeline ‚Äî 13 11 14</a></li>
          <li><a href="https://www.beyondblue.org.au/" target="_blank" rel="noopener">Beyond Blue ‚Äî 1300 22 4636</a></li>
          <li><a href="https://www.rmit.edu.au/students/support-and-facilities/student-support/counselling" target="_blank" rel="noopener">RMIT Counselling & Wellbeing</a></li>
        </ul>
        <p class="muted" style="margin:6px 0 0">If it‚Äôs an emergency, call <b>000</b>.</p>
      </div>

      <div class="hud" style="margin-top:10px">
        <button class="btn primary" id="btn-restart">Play Again</button>
        <button class="btn ghost" id="btn-menu">Back to Menu</button>
      </div>
    </div>

    <footer>¬© 2025 Resilience Run ‚Ä¢ RMIT City ‚Äî The Trinity ‚Ä¢ Front-end only</footer>
  </div>

  <script>
    // ========== Minimal Sound Engine (WebAudio, no external files) ==========
    const Sound = (() => {
      const ctx = (window.AudioContext ? new AudioContext() : null);
      function beep({freq=440, dur=0.12, type='sine', vol=0.03}) {
        if(!ctx) return;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = type; osc.frequency.value = freq;
        gain.gain.value = vol;
        osc.connect(gain).connect(ctx.destination);
        osc.start();
        gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + dur);
        osc.stop(ctx.currentTime + dur + 0.02);
      }
      function rollSound(){
        // quick trills
        [0,0.08,0.16,0.24,0.32,0.40].forEach((t,i)=>setTimeout(()=>beep({freq:300+Math.random()*200, dur:0.06, type:'triangle', vol:0.03}), t*1000));
      }
      function pop(){ beep({freq:660, dur:0.10, type:'square', vol:0.04}); }
      return { rollSound, pop };
    })();

    // ========== Confetti (simple canvas particles) ==========
    const Confetti = (() => {
      const cvs = document.getElementById('confettiCanvas');
      const ctx = cvs.getContext('2d');
      let parts = [], running=false, tId=null;

      function resize(){ cvs.width = innerWidth; cvs.height = innerHeight; }
      addEventListener('resize', resize); resize();

      function burst(n=180){
        parts = [];
        const colors = ['#8ee3ff','#b9fbd6','#ffd3a3','#d7c7ff','#f9fcb6'];
        for(let i=0;i<n;i++){
          parts.push({
            x: innerWidth/2, y: innerHeight/3,
            vx: (Math.random()-0.5)*6, vy: (Math.random()-0.8)*6 - 2,
            g: 0.12 + Math.random()*0.1,
            s: 4 + Math.random()*4,
            c: colors[(Math.random()*colors.length)|0],
            a: 1, rot: Math.random()*Math.PI*2, vr: (Math.random()-0.5)*0.2
          });
        }
        cvs.style.display='block'; running=true;
        if(!tId) loop();
        setTimeout(stop, 3000); // auto stop
      }
      function loop(){
        if(!running){ tId=null; return; }
        tId=requestAnimationFrame(loop);
        ctx.clearRect(0,0,cvs.width,cvs.height);
        parts.forEach(p=>{
          p.vy += p.g; p.x += p.vx; p.y += p.vy; p.rot += p.vr; p.a *= 0.997;
          ctx.save(); ctx.globalAlpha=p.a; ctx.translate(p.x,p.y); ctx.rotate(p.rot);
          ctx.fillStyle=p.c; ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s);
          ctx.restore();
        });
      }
      function stop(){ running=false; cvs.style.display='none'; }
      return { burst };
    })();

    // ========== Game state ==========
    const state = { tile:1, maxTile:30, wellbeing:70, knowledge:20, rolling:false, finished:false };

    // ========== Board/UI helpers ==========
    const boardEl = document.getElementById('board');
    function clamp(v,min,max){ return Math.max(min,Math.min(max,v)); }
    function updateBars(){
      const wb = clamp(state.wellbeing,0,100), kn = clamp(state.knowledge,0,100);
      document.getElementById('wb-bar').style.width = wb+'%';
      document.getElementById('kn-bar').style.width = kn+'%';
      document.getElementById('wb-num').textContent = wb;
      document.getElementById('kn-num').textContent = kn;
    }
    function drawBoard(){
      boardEl.innerHTML='';
      for(let i=1;i<=state.maxTile;i++){
        const d=document.createElement('div');
        d.className='tile'; d.dataset.index=i;
        if(i===1){ d.classList.add('start'); d.dataset.tag='Start'; }
        if(i===state.maxTile){ d.classList.add('finish'); d.dataset.tag='Finish'; }
        if(i===state.tile){ const p=document.createElement('div'); p.className='player'; d.appendChild(p); }
        else d.textContent=i;
        boardEl.appendChild(d);
      }
      document.getElementById('tile-num').textContent = state.tile;
      updateBars();
    }

    // ========== Events (expanded deck; AU context) ==========
    // Each event has two choices (A/B) with wellbeing (wb) and knowledge (kn) effects.
    const events = [
      { title:"Heatwave Week", text:"It‚Äôs 37¬∞C. Uni issues a heat alert.",
        a:{label:"Study early + hydrate", wb:+4, kn:+2, tip:"Morning sessions reduce heat load."},
        b:{label:"Push late-night cram", wb:-6, kn:+3, tip:"Heat harms sleep & focus."}
      },
      { title:"Counselling Drop-in", text:"Free short consults available today.",
        a:{label:"Attend 20-min session", wb:+8, kn:0, tip:"Early help prevents escalation."},
        b:{label:"Skip, keep grinding", wb:-4, kn:+1, tip:"Avoiding stress can backfire."}
      },
      { title:"Myki Budget Squeeze", text:"Fares feel steep this month.",
        a:{label:"Plan off-peak + study at home", wb:+2, kn:+1, tip:"Budgeting lowers stress."},
        b:{label:"Ignore & worry", wb:-3, kn:0, tip:"Lingering anxiety drains energy."}
      },
      { title:"Group Assignment", text:"Teammates suggest splitting tasks.",
        a:{label:"Define roles & timeline", wb:+3, kn:+5, tip:"Plans avoid last-minute chaos."},
        b:{label:"Wing it", wb:-5, kn:+1, tip:"Chaos ‚Üí crunch ‚Üí burnout."}
      },
      { title:"Part-time Shift Clash", text:"Extra shift overlaps a study block.",
        a:{label:"Negotiate another slot", wb:+2, kn:+2, tip:"Boundaries protect rest."},
        b:{label:"Accept & cut sleep", wb:-7, kn:+3, tip:"Sleep loss tanks mood/cognition."}
      },
      { title:"GP Mental Health Plan", text:"Bulk-billed clinic nearby.",
        a:{label:"Book GP for plan", wb:+9, kn:0, tip:"Rebates make therapy affordable."},
        b:{label:"Postpone indefinitely", wb:-4, kn:0, tip:"Delays raise long-term cost."}
      },
      { title:"Exam Crunch", text:"Two finals loom.",
        a:{label:"Pomodoro + breaks", wb:+3, kn:+6, tip:"Intervals beat marathons."},
        b:{label:"All-nighter", wb:-10, kn:+6, tip:"Short-term gain, big crash."}
      },
      { title:"Peer Study Group", text:"Friends invite a review session.",
        a:{label:"Join & share notes", wb:+3, kn:+5, tip:"Support boosts motivation."},
        b:{label:"Decline, isolate", wb:-3, kn:+1, tip:"Connection is protective."}
      },
      { title:"Campus Rec Class", text:"Free 30-min class between lectures.",
        a:{label:"Light exercise", wb:+5, kn:+1, tip:"Movement stabilises mood."},
        b:{label:"Doomscroll", wb:-2, kn:0, tip:"Active breaks beat passive scrolling."}
      },
      { title:"Commute Delay", text:"Signal fault. You‚Äôre stuck.",
        a:{label:"Plan & review notes", wb:+1, kn:+2, tip:"Turn dead time useful."},
        b:{label:"Stress spiral", wb:-4, kn:0, tip:"Reframing helps."}
      },
      { title:"Sleep Hygiene", text:"Late coffee tempting‚Ä¶",
        a:{label:"Switch to water + wind-down", wb:+4, kn:+1, tip:"Sleep quality compounds."},
        b:{label:"Double espresso now", wb:-5, kn:+1, tip:"Stimulants can harm sleep."}
      },
      { title:"Inclusive Event", text:"Cultural society invites you.",
        a:{label:"Attend & connect", wb:+4, kn:+2, tip:"Belonging supports mental health."},
        b:{label:"Skip to study alone", wb:-2, kn:+2, tip:"Balance academics & community."}
      },
      { title:"Rent Pressure", text:"Landlord raises rent.",
        a:{label:"Budget + seek advice", wb:+1, kn:+2, tip:"Student services can help."},
        b:{label:"Panic & avoid planning", wb:-6, kn:0, tip:"Uncertainty worsens stress."}
      },
      { title:"Heat & Smoke", text:"Air quality warning.",
        a:{label:"Study indoors w/ breaks", wb:+2, kn:+2, tip:"Protect lungs & focus."},
        b:{label:"Outdoor cram", wb:-5, kn:+1, tip:"AQ affects cognition."}
      },
      { title:"Digital Overload", text:"5 hrs social apps today.",
        a:{label:"App timers & focus mode", wb:+3, kn:+1, tip:"Boundaries restore attention."},
        b:{label:"Keep scrolling", wb:-4, kn:0, tip:"Doomscroll drains mood."}
      },
      { title:"Buddy Check-in", text:"Friend messages support.",
        a:{label:"Open up & plan", wb:+5, kn:+1, tip:"Social support is key."},
        b:{label:"Ghost them", wb:-3, kn:0, tip:"Isolation raises risk."}
      },
      { title:"Library Resource", text:"Librarian offers workshop.",
        a:{label:"Attend referencing session", wb:+1, kn:+5, tip:"Skills reduce future stress."},
        b:{label:"Skip‚Äîlearn later", wb:-1, kn:+1, tip:"Procrastination costs time."}
      },
      { title:"Healthy Snack", text:"Break between lectures.",
        a:{label:"Fruit + water", wb:+2, kn:+1, tip:"Steady energy > sugar spikes."},
        b:{label:"Energy drink + chips", wb:-2, kn:+1, tip:"Crash likely later."}
      }
    ];
    function pickEvent(){ return events[(Math.random()*events.length)|0]; }

    // ========== Views / Logging ==========
    function show(id){
      document.getElementById('view-menu').style.display = id==='menu'?'block':'none';
      document.getElementById('view-play').style.display = id==='play'?'block':'none';
      document.getElementById('view-results').style.display = id==='results'?'block':'none';
    }
    const logEl = document.getElementById('log');
    function log(msg){ const p=document.createElement('p'); p.textContent=msg; logEl.prepend(p); }

    // ========== Event rendering ==========
    function renderEventCard(ev){
      const el = document.getElementById('event-area');
      el.innerHTML = `
        <div class="card panel" style="background:#ffffff;border:1px solid var(--stroke)">
          <h4 style="margin:0 0 6px">${ev.title}</h4>
          <p class="muted" style="margin-top:0">${ev.text}</p>
          <div class="row">
            <button class="btn" id="choice-a" aria-label="Choice A">${ev.a.label}</button>
            <button class="btn" id="choice-b" aria-label="Choice B">${ev.b.label}</button>
          </div>
          <p class="muted" style="margin:10px 0 0">Tip: <em>${ev.a.tip}</em> / <em>${ev.b.tip}</em></p>
        </div>
      `;
      document.getElementById('choice-a').onclick = ()=>applyChoice(ev.a,'A');
      document.getElementById('choice-b').onclick = ()=>applyChoice(ev.b,'B');
    }
    function applyChoice(choice,label){
      state.wellbeing = clamp(state.wellbeing + (choice.wb||0), 0, 100);
      state.knowledge  = clamp(state.knowledge + (choice.kn||0), 0, 100);
      updateBars();
      log(`Chose ${label}: WB ${choice.wb>=0?'+':''}${choice.wb||0}, KN ${choice.kn>=0?'+':''}${choice.kn||0}`);
      document.getElementById('event-area').innerHTML='';
      if (state.tile>=state.maxTile){ endGame(); }
    }

    // ========== Dice rolling with animation ==========
    const diceEl = document.getElementById('dice-display');
    function animateDice(durationMs=900){
      Sound.rollSound();
      const start = performance.now();
      diceEl.classList.add('rolling');
      return new Promise(resolve=>{
        function tick(t){
          const elapsed = t - start;
          diceEl.textContent = (1 + (Math.random()*6|0));
          if(elapsed < durationMs) requestAnimationFrame(tick);
          else { diceEl.classList.remove('rolling'); resolve(); }
        }
        requestAnimationFrame(tick);
      });
    }

    async function roll(){
      if (state.rolling || state.finished) return;
      state.rolling = true;
      await animateDice(950);
      const d = 1 + Math.floor(Math.random()*6);
      diceEl.textContent = d;
      log(`You rolled a ${d}.`);
      setTimeout(()=>{
        state.tile = Math.min(state.tile + d, state.maxTile);
        drawBoard();
        const ev = pickEvent();
        renderEventCard(ev);
        if (state.tile>=state.maxTile){ log("Final tile reached."); }
        state.rolling=false;
      }, 120);
    }

    // ========== Game flow ==========
    function startGame(){
      state.tile=1; state.wellbeing=70; state.knowledge=20; state.finished=false;
      logEl.innerHTML=''; document.getElementById('event-area').innerHTML='';
      drawBoard(); show('play'); log("Semester begins. Aim for Wellbeing ‚â• 60 at finish.");
    }

    function endGame(){
      state.finished = true;
      const wb=clamp(state.wellbeing,0,100), kn=clamp(state.knowledge,0,100);
      let title, body;
      if (state.tile>=state.maxTile){
        if (wb>=60){
          title="You finished with balance üéì";
          body=`Wellbeing ${wb}, Knowledge ${kn}. You navigated uni life with sustainable habits.`;
          Confetti.burst(); Sound.pop();
        } else {
          title="You finished exhausted üòµ";
          body=`Wellbeing ${wb}, Knowledge ${kn}. Consider earlier support, pacing, and rest strategies.`;
        }
      } else {
        title="You ended early";
        body=`Stopped at tile ${state.tile}. Wellbeing ${wb}, Knowledge ${kn}. Balance attempts with pacing and support.`;
      }
      document.getElementById('result-title').textContent = title;
      document.getElementById('result-body').textContent = body;
      show('results');
    }

    // ========== Buttons ==========
    document.getElementById('btn-start').onclick = startGame;
    document.getElementById('btn-how').onclick = ()=>alert(
      "Roll the dice, land on tiles, make choices.\n" +
      "Each choice affects Wellbeing and Knowledge.\n" +
      "Reach the final tile with Wellbeing ‚â• 60 to win.\n" +
      "Front-end only; works offline."
    );
    document.getElementById('btn-roll').onclick = roll;
    document.getElementById('btn-end').onclick = ()=>{ if(!state.finished) endGame(); };
    document.getElementById('btn-restart').onclick = startGame;
    document.getElementById('btn-menu').onclick = ()=>show('menu');

    // ========== Init ==========
    drawBoard(); // draw on load for preview
  </script>
</body>
</html>
